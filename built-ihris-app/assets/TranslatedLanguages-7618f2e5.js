import{g as Ve,m as Ce,a as ye,o as be,b as Se,c as Te,u as Le,r as y,d as q,e as b,f as Ee,h as we,i as De,j as Ie,w as Z,k as Ae,V as $,l as t,F as M,n as Pe,p as V,q as re,s as Q,t as Fe,v as S,x as Re,y as Ue,z as g,A as Be,B as ee,C as Me,_ as Oe,D as G,E as L,G as te,H as n,I as Ne,J as je,K as A,L as ae,M as le,N as He,O as Ke,P as O,Q as ze,R as ne,S as qe,T as Ge,U as Je,W as se,X as ue,Y as Qe,Z as B,$ as We,a0 as Xe,a1 as J}from"./index-98a581eb.js";import{V as P,a as oe}from"./VTooltip-28bda13a.js";function Ye(e,s,l){if(s==null)return e;if(Array.isArray(s))throw new Error("Multiple matches is not implemented");return typeof s=="number"&&~s?t(M,null,[t("span",{class:"v-autocomplete__unmask"},[e.substr(0,s)]),t("span",{class:"v-autocomplete__mask"},[e.substr(s,l)]),t("span",{class:"v-autocomplete__unmask"},[e.substr(s+l)])]):e}const Ze=Ve()({name:"VAutocomplete",props:{search:String,...Ce({filterKeys:["title"]}),...ye(),...be(Se({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...Te({transition:!1})},emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,s){let{slots:l}=s;const{t:W}=Le(),r=y(),m=y(!1),x=y(!0),F=y(),E=q(e,"menu"),u=b({get:()=>E.value,set:a=>{var c;E.value&&!a&&((c=F.value)!=null&&c.Î¨openChildren)||(E.value=a)}}),o=y(-1),X=b(()=>{var a;return(a=r.value)==null?void 0:a.color}),{items:N,transformIn:ie,transformOut:ce}=Ee(e),{textColorClasses:de,textColorStyles:fe}=we(X),f=q(e,"search",""),k=q(e,"modelValue",[],a=>ie(Me(a)),a=>{const c=ce(a);return e.multiple?c:c[0]??null}),T=De(),{filteredItems:j,getMatches:ve}=Ie(e,N,b(()=>x.value?void 0:f.value)),_=b(()=>k.value.map(a=>N.value.find(c=>e.valueComparator(c.value,a.value))||a)),H=b(()=>e.hideSelected?j.value.filter(a=>!_.value.some(c=>c.value===a.value)):j.value),K=b(()=>_.value.map(a=>a.props.value)),Y=b(()=>_.value[o.value]),z=y();function ge(a){e.openOnClear&&(u.value=!0),f.value=""}function me(){e.hideNoData&&!N.value.length||e.readonly||T!=null&&T.isReadonly.value||(u.value=!0)}function he(a){var R,d,p,C;if(e.readonly||T!=null&&T.isReadonly.value)return;const c=r.value.selectionStart,h=K.value.length;if((o.value>-1||["Enter","ArrowDown","ArrowUp"].includes(a.key))&&a.preventDefault(),["Enter","ArrowDown"].includes(a.key)&&(u.value=!0),["Escape"].includes(a.key)&&(u.value=!1),["Enter","Escape","Tab"].includes(a.key)&&(x.value=!0),a.key==="ArrowDown"?(R=z.value)==null||R.focus("next"):a.key==="ArrowUp"&&((d=z.value)==null||d.focus("prev")),!!e.multiple){if(["Backspace","Delete"].includes(a.key)){if(o.value<0){a.key==="Backspace"&&!f.value&&(o.value=h-1);return}const i=o.value;Y.value&&D(Y.value),o.value=i>=h-1?h-2:i}if(a.key==="ArrowLeft"){if(o.value<0&&c>0)return;const i=o.value>-1?o.value-1:h-1;_.value[i]?o.value=i:(o.value=-1,r.value.setSelectionRange((p=f.value)==null?void 0:p.length,(C=f.value)==null?void 0:C.length))}if(a.key==="ArrowRight"){if(o.value<0)return;const i=o.value+1;_.value[i]?o.value=i:(o.value=-1,r.value.setSelectionRange(0,0))}}}function pe(a){f.value=a.target.value}function xe(){m.value&&(x.value=!0)}function ke(a){m.value=!0}function _e(a){var c;a.relatedTarget==null&&((c=r.value)==null||c.focus())}const w=y(!1);function D(a){if(e.multiple){const c=K.value.findIndex(h=>e.valueComparator(h,a.value));if(c===-1)k.value=[...k.value,a];else{const h=[...k.value];h.splice(c,1),k.value=h}}else k.value=[a],w.value=!0,l.selection||(f.value=a.title),u.value=!1,x.value=!0,ee(()=>w.value=!1)}return Z(m,a=>{var c;a?(w.value=!0,f.value=e.multiple||l.selection?"":String(((c=_.value.at(-1))==null?void 0:c.props.title)??""),x.value=!0,ee(()=>w.value=!1)):(!e.multiple&&!f.value&&(k.value=[]),u.value=!1,f.value="")}),Z(f,a=>{!m.value||w.value||(a&&(u.value=!0),x.value=!a)}),Ae(()=>{const a=!!(e.chips||l.chip),c=!!(!e.hideNoData||H.value.length||l.prepend||l.append||l["no-data"]),h=k.value.length>0,[R]=$.filterProps(e);return t($,V({ref:r},R,{modelValue:f.value,"onUpdate:modelValue":d=>{d==null&&(k.value=[])},focused:m.value,"onUpdate:focused":d=>m.value=d,validationValue:k.externalValue,dirty:h,onInput:pe,class:["v-autocomplete",{"v-autocomplete--active-menu":u.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selecting-index":o.value>-1,[`v-autocomplete--${e.multiple?"multiple":"single"}`]:!0,"v-autocomplete--selection-slot":!!l.selection},e.class],style:e.style,appendInnerIcon:e.menuIcon,readonly:e.readonly,placeholder:h?void 0:e.placeholder,"onClick:clear":ge,"onMousedown:control":me,onKeydown:he}),{...l,default:()=>t(M,null,[t(Pe,V({ref:F,modelValue:u.value,"onUpdate:modelValue":d=>u.value=d,activator:"parent",contentClass:"v-autocomplete__content",eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:xe},e.menuProps),{default:()=>[c&&t(re,{ref:z,selected:K.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:d=>d.preventDefault(),onFocusin:ke,onFocusout:_e},{default:()=>{var d,p,C;return[!H.value.length&&!e.hideNoData&&(((d=l["no-data"])==null?void 0:d.call(l))??t(Q,{title:W(e.noDataText)},null)),(p=l["prepend-item"])==null?void 0:p.call(l),H.value.map(i=>{var I;return((I=l.item)==null?void 0:I.call(l,{item:i,props:V(i.props,{onClick:()=>D(i)})}))??t(Q,V({key:i.value},i.props,{onClick:()=>D(i)}),{prepend:v=>{let{isSelected:U}=v;return t(M,null,[e.multiple&&!e.hideSelected?t(Fe,{modelValue:U,ripple:!1,tabindex:"-1"},null):void 0,i.props.prependIcon&&t(S,{icon:i.props.prependIcon},null)])},title:()=>{var v,U;return x.value?i.title:Ye(i.title,(v=ve(i))==null?void 0:v.title,((U=f.value)==null?void 0:U.length)??0)}})}),(C=l["append-item"])==null?void 0:C.call(l)]}})]}),_.value.map((d,p)=>{var I;function C(v){v.stopPropagation(),v.preventDefault(),D(d)}const i={"onClick:close":C,onMousedown(v){v.preventDefault(),v.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return t("div",{key:d.value,class:["v-autocomplete__selection",p===o.value&&["v-autocomplete__selection--selected",de.value]],style:p===o.value?fe.value:{}},[a?l.chip?t(Ue,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:d.title}}},{default:()=>{var v;return[(v=l.chip)==null?void 0:v.call(l,{item:d,index:p,props:i})]}}):t(Re,V({key:"chip",closable:e.closableChips,size:"small",text:d.title},i),null):((I=l.selection)==null?void 0:I.call(l,{item:d,index:p}))??t("span",{class:"v-autocomplete__selection-text"},[d.title,e.multiple&&p<_.value.length-1&&t("span",{class:"v-autocomplete__selection-comma"},[g(",")])])])})])})}),Be({isFocused:m,isPristine:x,menu:u,search:f,filteredItems:j,select:D},r)}}),$e={data(){return{snackbarColor:"green",snackbarText:"",snackbar:!1,addDialog:!1,translatedLanguages:[],selectedLocale:"",languages:[],language:"",textExtractionStatus:{}}},methods:{getTranslatedLanguages(){fetch("/translator/getTranslatedLanguages").then(e=>{e.json().then(s=>{this.translatedLanguages=s;for(const l of this.translatedLanguages)this.$set(this.textExtractionStatus,l.locale,{}),this.$set(this.textExtractionStatus[l.locale],"active",!1),this.$set(this.textExtractionStatus[l.locale],"running",!1),this.$set(this.textExtractionStatus[l.locale],"displayStatus",!1)})}).catch(e=>{console.log(e)})},selected(e){this.$router.push({path:"/review/"+e.locale})},populateTexts(){for(const e of this.translatedLanguages)this.textExtractionStatus[e.locale].active=!0;this.textExtractionStatus.en.running=!0,fetch("/translator/extractTexts/en").then(e=>{if(this.textExtractionStatus.en.running=!1,this.textExtractionStatus.en.displayStatus=!0,e.status===200)for(const s of this.translatedLanguages)s.locale!=="en"&&(this.textExtractionStatus[s.locale].active=!0,this.textExtractionStatus[s.locale].running=!0,fetch("/translator/extractTexts/"+s.locale).then(l=>{l.status===200&&(this.textExtractionStatus[s.locale].running=!1,this.textExtractionStatus[s.locale].displayStatus=!0)}).catch(()=>{this.textExtractionStatus[s.locale].running=!1,this.snackbar=!0,this.snackbarColor="red",this.snackbarText="Error Occured for English"}))}).catch(()=>{this.textExtractionStatus.en.running=!1,this.snackbar=!0,this.snackbarColor="red",this.snackbarText="Error Occured for English"})},getLanguages(){this.addDialog=!0,fetch("/translator/languages").then(e=>{e.json().then(s=>{this.languages=s})})},add(){fetch("/translator/addLanguage/"+this.language,{method:"POST"}).then(e=>{e.status===201?(this.addDialog=!1,this.getTranslatedLanguages(),this.snackbar=!0,this.snackbarColor="green",this.snackbarText="Language Added",this.emitter.emit("getLanguageList")):(this.snackbar=!0,this.snackbarColor="red",this.snackbarText="Error Occured")}).catch(()=>{this.snackbar=!0,this.snackbarColor="red",this.snackbarText="Error Occured"})}},created(){this.getTranslatedLanguages()}},et={class:"home"},tt={class:"text-h6"},at=O("div",{class:"text-subtitle-2"},"Select to view",-1),lt=O("span",null,"Add New Language",-1),nt=O("span",null,"Populate languages with iHRIS Texts",-1);function st(e,s,l,W,r,m){const x=G("v-list-item-content"),F=G("v-list-item-group"),E=G("center");return L(),te("div",et,[t(Ne,{modelValue:r.snackbar,"onUpdate:modelValue":s[1]||(s[1]=u=>r.snackbar=u),timeout:"2000"},{action:n(({attrs:u})=>[t(A,V({color:r.snackbarColor,text:""},u,{onClick:s[0]||(s[0]=o=>r.snackbar=!1)}),{default:n(()=>[g(" Close ")]),_:2},1040,["color"])]),default:n(()=>[g(ae(r.snackbarText)+" ",1)]),_:1},8,["modelValue"]),t(je,{transition:"dialog-top-transition","max-width":"600",modelValue:r.addDialog,"onUpdate:modelValue":s[3]||(s[3]=u=>r.addDialog=u)},{default:n(u=>[t(le,null,{default:n(()=>[t(He,{color:"primary",dark:""},{default:n(()=>[g("Select Language")]),_:1}),t(Ke,null,{default:n(()=>[O("div",tt,[t(Ze,{modelValue:r.language,"onUpdate:modelValue":s[2]||(s[2]=o=>r.language=o),items:r.languages,"item-value":"locale","item-text":"name",dense:"",filled:"",label:"Languages"},null,8,["modelValue","items"])])]),_:1}),t(ze,{class:"justify-end"},{default:n(()=>[t(A,{text:"",onClick:o=>u.value=!1},{default:n(()=>[t(S,null,{default:n(()=>[g("mdi-close")]),_:1}),g(" Close ")]),_:2},1032,["onClick"]),t(ne),t(A,{disabled:!r.language,text:"",onClick:m.add},{default:n(()=>[t(S,null,{default:n(()=>[g("mdi-plus")]),_:1}),g(" Add ")]),_:1},8,["disabled","onClick"])]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"]),t(E,null,{default:n(()=>[t(le,{class:"mx-auto","max-width":"300",tile:""},{default:n(()=>[t(qe,{dark:"",color:"primary"},{default:n(()=>[t(S,null,{default:n(()=>[g("mdi-google-translate")]),_:1}),t(ne),t(Ge,null,{default:n(()=>[g("Enabled Languages")]),_:1})]),_:1}),t(Je,{"primary-title":""},{default:n(()=>[t(se,null,{default:n(()=>[t(P,{cols:"7"},{default:n(()=>[at]),_:1}),t(P,{cols:"2"},{default:n(()=>[t(oe,{top:""},{activator:n(({on:u,attrs:o})=>[t(A,V({class:"mx-2",fab:"",dark:"",color:"indigo",small:"",onClick:m.getLanguages},o,ue(u)),{default:n(()=>[t(S,null,{default:n(()=>[g("mdi-plus")]),_:1})]),_:2},1040,["onClick"])]),default:n(()=>[lt]),_:1})]),_:1}),t(P,{cols:"2"},{default:n(()=>[t(oe,{top:""},{activator:n(({on:u,attrs:o})=>[t(A,V({class:"mx-2",fab:"",dark:"",color:"indigo",small:"",onClick:m.populateTexts},o,ue(u)),{default:n(()=>[t(S,null,{default:n(()=>[g("mdi-publish")]),_:1})]),_:2},1040,["onClick"])]),default:n(()=>[nt]),_:1})]),_:1})]),_:1})]),_:1}),t(re,{shaped:""},{default:n(()=>[t(F,{modelValue:r.selectedLocale,"onUpdate:modelValue":s[4]||(s[4]=u=>r.selectedLocale=u),color:"primary"},{default:n(()=>[(L(!0),te(M,null,Qe(r.translatedLanguages,(u,o)=>(L(),B(Q,{key:o},{default:n(()=>[t(x,null,{default:n(()=>[t(se,null,{default:n(()=>[t(P,null,{default:n(()=>[t(We,{textContent:ae(u.language),onClick:X=>m.selected(u)},null,8,["textContent","onClick"])]),_:2},1024),r.textExtractionStatus[u.locale].active?(L(),B(P,{key:0},{default:n(()=>[r.textExtractionStatus[u.locale].running?(L(),B(Xe,{key:0,color:"deep-purple accent-4",indeterminate:"",rounded:"",height:"6"})):J("",!0),r.textExtractionStatus[u.locale].displayStatus?(L(),B(S,{key:1},{default:n(()=>[g(" mdi-check ")]),_:1})):J("",!0)]),_:2},1024)):J("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})])}const rt=Oe($e,[["render",st]]);export{rt as default};
