(function(){"use strict";var e={431:function(e,t,o){o.d(t,{Y:function(){return me}});var n=o(538),r=o(998),a=o(3059),s=function(){var e=this,t=e._self._c;return t(r.Z,{attrs:{id:"top"}},[t("IhrisHeader",{attrs:{app:"",header:e.header},on:{loggedout:e.updateConfig}}),t(a.Z,[t("center",[t("p"),t("b",[e._v("iHRIS Translation APP")])]),t("router-view")],1),t("IhrisFooter",{attrs:{footer:e.footer}})],1)},i=[],l=(o(7658),o(6232)),c=o(4562),u=o(9582),h=o(4886),d=o(4324),f=o(5495),p=o(2933),g=o(3305),m=o(3687),v=o(7953),y=function(){var e=this,t=e._self._c;return t("div",[t(l.Z,{attrs:{color:"white",app:"","clipped-left":"","clipped-right":""}},[t("a",{attrs:{href:e.$store.state.coreURL}},[t(f.Z,{attrs:{src:"/ihrisapp/translator/images/"+e.header.logo,contain:"","max-height":"36","max-width":"106"}})],1),t(v.qW,{staticClass:"headline ml-2",attrs:{bottom:"true"}},[e.header.title?t("span",{staticClass:"primary--text font-weight-bold"},[e._v(e._s(e.header.title))]):e._e(),e.header.site?t("span",{staticClass:"secondary--text font-weight-bold"},[e._v(" | "+e._s(e.header.site))]):e._e()]),e.$store.state.security_off?t(m.Z):e._e(),e.$store.state.security_off?t("div",{staticClass:"error font-weight-bold white--text",attrs:{dark:""}},[e._v(" Security has been disabled for remote configuration and modules! "),t("br"),e._v(" This should only be done during development. ")]):e._e(),t(m.Z),t("div",[e._v(e._s(e.$t("App.hardcoded-texts.Welcome"))+" "),e.$store.state.user.loggedin?t("span",[e._v(", "+e._s(e.$store.state.user.name))]):e._e()]),t(m.Z),e.header.title?e._e():t(g.Z,{attrs:{indeterminate:"",color:"primary"}}),t(c.Z,{attrs:{icon:"",href:e.$store.state.coreURL,title:"Home"}},[t(d.Z,[e._v("mdi-home")])],1),t(c.Z,{attrs:{icon:"",title:"Help"}},[t(d.Z,[e._v("mdi-help")])],1),t("div",[t("language-switcher")],1),e.$store.state.user.loggedin?[t(c.Z,{attrs:{small:"",fab:"",dark:"",title:"Logout",loading:e.loading,disabled:e.loading},on:{click:e.logout}},[t(d.Z,[e._v("mdi-logout")])],1)]:e._e()],2),t(p.Z,{attrs:{value:e.idle_countdown}},[t(u.Z,{staticClass:"secondary lighten-1"},[t(h.EB,{staticClass:"headline warning white--text",attrs:{"primary-title":""}},[e._v("Idle - Auto Logout")]),t(h.ZB,{staticClass:"black--text"},[e._v("You have been idle too long and will be logged out in "+e._s(e.idle_logout)+" seconds.")])],1)],1)],1)},_=[],b=o(6123),w=o.n(b),k=o(5808),O=o(4525),Z=o(523),L=o(5754),P=o(4568),j=function(){var e=this,t=e._self._c;return t(P.Z,{staticClass:"ma-8",attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:o,attrs:n}){return[t(c.Z,e._g(e._b({staticClass:"text-capitalize",attrs:{text:""}},"v-btn",n,!1),o),[t(Z.Z,{attrs:{size:"24"}},[t(f.Z,{attrs:{src:`/flag_${e.activeFlag}.svg`}})],1),e._v(" "+e._s(e.activeLang)+" "),t(d.Z,{attrs:{small:"",right:""}},[e._v("mdi-menu-down")])],1)]}}]),model:{value:e.languageMenu,callback:function(t){e.languageMenu=t},expression:"languageMenu"}},[t(k.Z,{attrs:{dense:""}},e._l(e.languages,(function(o,n){return t(O.Z,{key:n,on:{click:function(t){return e.handleMenuItemClick(o)}}},[t(Z.Z,{attrs:{size:"24"}},[t(f.Z,{attrs:{src:`/flag_${o.flag}.svg`}})],1),t(L.V9,[e._v(e._s(o.language))])],1)})),1)],1)},$=[],C=o(7152),I=o(629);n.ZP.use(I.ZP);var x=new I.ZP.Store({state:{user:{loggedin:!1,name:""},coreURL:""},getters:{},mutations:{login(e,t){e.user.loggedin=!0,e.user.name=t.name,e.user.location=t.location,e.user.role=t.role,e.user.userId=t.userId,e.user.reference=t.reference,e.user.facilityId=t.facilityId,e.user.physicalLocation=t.physicalLocation},logout(e){e.user.loggedin=!1,e.user.name="",e.user.name="",e.user.location="",e.user.role="",e.user.reference="",e.user.facilityId="",e.user.physicalLocation=""},securityOff(e,t){e.security_off=t}},actions:{},modules:{}});n.ZP.use(C.Z);const S=new C.Z({locale:"en",fallbackLocale:"en",messages:{}});function A(e){x.state.initializingApp=!0,fetch(`/translator/getLocale/${e}`).then((t=>{t.json().then((t=>{x.state.initializingApp=!1,S.setLocaleMessage(e,t),S.locale=e}))}))}var T={data(){return{languages:[],activeLang:"English",activeFlag:"en",dialog:!1,languageMenu:!1}},created(){this.getLanguageList(),me.$on("getLanguageList",(()=>{this.getLanguageList()}))},methods:{handleMenuItemClick(e){A(e.locale),localStorage.setItem("activeLang",e.language),localStorage.setItem("activeFlag",e.flag),localStorage.setItem("activeLocale",e.locale),this.activeLang=e.language,this.activeFlag=e.flag},getLanguageList(){fetch("/translator/getTranslatedLanguages").then((e=>{e.json().then((e=>{this.languages=e,this.languages.sort(((e,t)=>e.language<t.language?-1:e.language>t.language?1:0));const t=localStorage.getItem("activeLocale")||this.$i18n.locale||"en",o=this.languages.find((e=>e.locale===t));this.$i18n.locale=o.locale,this.activeLang=o.language,A(o.locale||"en")}))}))}}},E=T,U=o(1001),M=(0,U.Z)(E,j,$,!1,null,null,null),R=M.exports,F={name:"IhriHeader",props:["header"],data:function(){return{loading:!1,idle_countdown:!1,idle_logout:30}},components:{LanguageSwitcher:R},onIdle(){this.$store.state.user.loggedin&&this.idleDialog()},onActive(){this.idle_countdown=!1},methods:{idleDialog(){this.idle_logout=30,this.idle_countdown=!0;const e=setInterval((()=>{if(!this.isAppIdle)return clearInterval(e);this.idle_logout-=1,this.idle_logout<1&&(clearInterval(e),this.logout(null,!0))}),1e3)},logout(e,t){"keycloak"===this.$store.state.idp?(w().remove("userObj"),this.$keycloak.logout()):(this.loading=!0,fetch("/auth/logout").then((()=>{this.loading=!1,this.$emit("loggedout"),t?this.$store.commit("setMessage",{type:"warning",text:"You have been logged out due to inactivity.",timeout:36e5}):this.$store.commit("setMessage",{type:"success",text:"You have logged out."}),window.location=this.$store.state.coreURL})))}}},N=F,B=(0,U.Z)(N,y,_,!1,null,null,null),H=B.exports,z=o(8271),D=o(1713),q=function(){var e=this,t=e._self._c;return t(z.Z,{attrs:{color:"white",app:""}},[t(D.Z,{attrs:{justify:"end"}},e._l(e.footer.links,(function(o){return t(c.Z,{key:o.id,staticClass:"text-none",attrs:{text:"",to:o.to,href:o.href,target:o.href?"_blank":""}},[e._v(" "+e._s(e.$t(`App.footer.${o.text}`))+" ")])})),1)],1)},Y=[],V={name:"the-footer",props:["footer"],data:function(){return{}}},W=V,J=(0,U.Z)(W,q,Y,!1,null,null,null),K=J.exports,G={data:function(){return{loading:!1,idle_countdown:!1,idle_logout:30,header:{title:!1,site:null,logo:"iHRIS5Logo.png",auths:[]},footer:{links:[]},nav:{active:null,menu:{},auths:[]}}},components:{IhrisHeader:H,IhrisFooter:K},methods:{updateConfig:function(){return new Promise((e=>{fetch("/auth").then((()=>{fetch("/config/site").then((t=>{t.json().then((t=>{if(Object.prototype.hasOwnProperty.call(t,"security")&&Object.prototype.hasOwnProperty.call(t.security,"disabled")&&this.$store.commit("securityOff",t.security.disabled),Object.prototype.hasOwnProperty.call(t,"title")&&(this.header.title=t.title),Object.prototype.hasOwnProperty.call(t,"site")&&(this.header.site=t.site),Object.prototype.hasOwnProperty.call(t,"logo")&&(this.header.logo=t.logo),Object.prototype.hasOwnProperty.call(t,"auth")){this.header.auths=[],this.nav.auths=[];for(const e of Object.keys(t.auth))t.auth[e].id=e,this.header.auths.push(t.auth[e]),this.nav.auths.push(t.auth[e])}if(Object.prototype.hasOwnProperty.call(t,"user"))if(t.user.loggedin){const e={name:t.user.name,location:t.user.location,role:t.user.role,reference:t.user.reference,facilityId:t.user.facilityId,physicalLocation:t.user.physicalLocation};this.$store.commit("login",e)}else this.$store.commit("logout");if(Object.prototype.hasOwnProperty.call(t,"nav")&&(Object.prototype.hasOwnProperty.call(t.nav,"active")&&(this.nav.active=t.nav.active),Object.prototype.hasOwnProperty.call(t.nav,"menu")&&(this.nav.menu=t.nav.menu),Object.prototype.hasOwnProperty.call(t.nav,"home")&&(this.nav.home=t.nav.home)),Object.prototype.hasOwnProperty.call(t,"footer")&&Object.prototype.hasOwnProperty.call(t.footer,"links"))for(const e of Object.keys(t.footer.links))t.footer.links[e].id=e,this.footer.links.push(t.footer.links[e]);return e()}))}))}))}))}},created(){this.updateConfig().then((()=>{let e=location.search;e=e.substring(1),e=e.split("=");const t=e.findIndex((e=>"baseURL"===e));-1!==t&&(this.$store.state.coreURL=e[t+1]),!this.$store.state.user.loggedin&&this.$store.state.coreURL&&(window.location=this.$store.state.coreURL)}))}},Q=G,X=(0,U.Z)(Q,s,i,!1,null,null,null),ee=X.exports,te=o(8345);n.ZP.use(te.ZP);const oe=[{path:"/",name:"home",component:()=>o.e(443).then(o.bind(o,1743))},{path:"/review/:locale",name:"review",component:()=>o.e(443).then(o.bind(o,1448))}],ne=new te.ZP({routes:oe});var re=ne,ae=o(4671),se=o(3431),ie=o.n(se),le=o(1705);n.ZP.use(le.Z);var ce=new le.Z({}),ue=(o(7147),o(9887)),he=o.n(ue);o(1703);const de=o(9887),fe={_code_cache:{},_code_loading:{},_setCache:(e,t)=>(fe._code_cache[e]=t,fe._code_loading[e]=!1,t),checkConstraints:(e,t,o,n,r)=>(console.log(e),new Promise(((a,s)=>{const i=e.split(","),l=[];for(const e of i)if(t[e]){const a=de.evaluate(o,t[e].expression);if(e.startsWith("ihris-search")){const o=a.shift(),s=["_elements=id"];while(a.length)s.push(a.shift()+"="+encodeURI(a.shift()));l.push(new Promise(((a,i)=>{fetch("/fhir/"+o+"?"+s.join("&")).then((o=>{if(200!==o.status)return i(o.status);o.json().then((o=>{if(0===o.total)a(!0);else if(r){const s=de.evaluate(o.entry,"resource.id");s.includes(r)?a(!0):(n.push(t[e].human),a(!1))}else n.push(t[e].human),a(!1)})).catch((e=>{i(e)}))})).catch((e=>{i(e)}))})))}else a.every(Boolean)?l.push(!0):(n.push(t[e].human),l.push(!1))}Promise.all(l).then((e=>{e.every(Boolean)?a(!0):a(!1)})).catch((e=>{s(e)}))}))),lookup:(e,t)=>e?t?fe.codeLookup(t,e):e.system&&e.code?fe.codeLookup(e.system,e.code):e.reference?fe.resourceLookup(e.reference):/([A-Z]\w*)\/([A-Za-z0-9\-.]{1,64})/.test(e)?fe.resourceLookup(e):new Promise((t=>t(e))):new Promise((t=>t(e))),resourceLookup:e=>new Promise((t=>{const o=e;fe._code_loading[o]?setTimeout((()=>{t(fe.resourceLookup(e))}),200):fe._code_cache[o]?t(fe._code_cache[o]):(fe._code_loading[o]=!0,fetch("/fhir/$short-name?reference="+e).then((n=>{200===n.status?n.json().then((n=>{n.display?t(fe._setCache(o,n.display)):(console.log("No display data from reference found ",o,n),t(fe._setCache(o,e)))})).catch((n=>{console.log(n),t(fe._setCache(o,e))})):(console.log("Invalid status from reference $short-name for ",o),t(fe._setCache(o,e)))})).catch((n=>{console.log(n),t(fe._setCache(o,e))})))})),codeLookup:(e,t,o)=>new Promise((n=>{const r=e+"#"+t;fe._code_loading[r]?setTimeout((()=>{n(fe.codeLookup(e,t,o))}),200):fe._code_cache[r]?n(fe._code_cache[r]):(fe._code_loading[r]=!0,fetch("/fhir/$short-name?system="+e+"&code="+t+"&valuset="+o).then((e=>{200===e.status?e.json().then((e=>{e.display?n(fe._setCache(r,e.display)):(console.log("No display data from codesystem found ",r,e),n(fe._setCache(r,t)))})).catch((e=>{console.log(e),n(fe._setCache(r,t))})):(console.log("Invalid status from codesystem $short-name for ",r),n(fe._setCache(r,t)))})).catch((e=>{console.log(e),n(fe._setCache(r,t))})))})),pathFieldExpression:e=>{const t=e.substring(e.indexOf(":")+1);return t.includes("-")||t.includes(".")?"`"+t+"`":t},expand:e=>{const t=(e,t)=>e.display===t.display?e.code===t.code?0:e.code<t.code?-1:1:e.display<t.display?-1:1,o=(e,t)=>{if(e.compose.include)for(const o of e.compose.include)if(o.concept)for(const e of o.concept)e.system=o.system,t.push(e)};return new Promise(((n,r)=>{const a=e.lastIndexOf("/"),s=e.lastIndexOf("|"),i=e.slice(a+1,-1!==s?s:e.length);let l=[];fetch("/fhir/ValueSet/"+i+"/$expand").then((e=>{e.ok?e.json().then((e=>{try{e.expansion&&0!==e.expansion.total||!e.compose.include?l=e.expansion.contains:o(e,l),l.sort(t),n(l)}catch(a){console.log(a),r(new Error("Invalid response from server."))}})).catch((e=>{r(e)})):fetch("/fhir/ValueSet/"+i).then((e=>{e.ok?e.json().then((e=>{o(e,l),l.sort(t),n(l)})).catch((e=>{r(e)})):r(new Error("Invalid response from server."))})).catch((e=>{r(e)}))})).catch((e=>{r(e)}))}))}};var pe=fe;const ge=o(4230);n.ZP.config.productionTip=!1,Object.defineProperty(n.ZP.prototype,"$fhirpath",{value:he()}),Object.defineProperty(n.ZP.prototype,"$fhirutils",{value:pe});const me=new n.ZP;n.ZP.use(ie(),{eventEmitter:me,store:x,idleTime:9e5,startAtIdle:!1}),fetch("/config/app").then((e=>{e.json().then((e=>{if(x.state.idp=e.idp,"keycloak"===x.state.idp){const t={realm:e.keycloak.realm,clientId:e.keycloak.UIClientId,url:e.keycloak.baseURL,onLoad:"login-required"},o=ae(t),r={install(e){e.$keycloak=o}};r.install=e=>{e.$keycloak=o,Object.defineProperties(e.prototype,{$keycloak:{get(){return o}}})},n.ZP.use(r),o.init({onLoad:t.onLoad}).then((e=>{e?(window.fetch=ge(fetch,{headers:{Authorization:`Bearer ${o.token}`}}),o.loadUserInfo().then((e=>{const t={resourceType:"Person",id:e.sub,meta:{profile:["http://ihris.org/fhir/StructureDefinition/ihris-person-user"]},name:[{use:"official",text:e.name}],active:!0};e.email&&(t.telecom=[{system:"email",value:e.email}]),fetch("/auth",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)}).then((e=>{e.json().then((e=>{w().set("userObj",JSON.stringify(e),"infinity"),new n.ZP({router:re,store:x,i18n:S,vuetify:ce,render:e=>e(ee)}).$mount("#app")}))})).catch((e=>{console.error(e)}))})),setInterval((()=>{o.updateToken(70)}),6e4)):window.location.reload()})).catch((()=>{alert("Keycloak access failed")}))}else n.ZP.prototype.$keycloak=null,new n.ZP({router:re,store:x,i18n:S,vuetify:ce,render:e=>e(ee)}).$mount("#app")}))}))}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(a.exports,a,a.exports,o),a.loaded=!0,a.exports}o.m=e,function(){o.amdO={}}(),function(){var e=[];o.O=function(t,n,r,a){if(!n){var s=1/0;for(u=0;u<e.length;u++){n=e[u][0],r=e[u][1],a=e[u][2];for(var i=!0,l=0;l<n.length;l++)(!1&a||s>=a)&&Object.keys(o.O).every((function(e){return o.O[e](n[l])}))?n.splice(l--,1):(i=!1,a<s&&(s=a));if(i){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,r,a]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce((function(t,n){return o.f[n](e,t),t}),[]))}}(),function(){o.u=function(e){return"js/about.3ad30b3e.js"}}(),function(){o.miniCssF=function(e){return"css/about.9c81daee.css"}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="ihris-translator:";o.l=function(n,r,a,s){if(e[n])e[n].push(r);else{var i,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==n||h.getAttribute("data-webpack")==t+a){i=h;break}}i||(l=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,o.nc&&i.setAttribute("nonce",o.nc),i.setAttribute("data-webpack",t+a),i.src=n),e[n]=[r];var d=function(t,o){i.onerror=i.onload=null,clearTimeout(f);var r=e[n];if(delete e[n],i.parentNode&&i.parentNode.removeChild(i),r&&r.forEach((function(e){return e(o)})),t)return t(o)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=d.bind(null,i.onerror),i.onload=d.bind(null,i.onload),l&&document.head.appendChild(i)}}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){o.p="/ihrisapp/translator/"}(),function(){var e=function(e,t,o,n){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css";var a=function(a){if(r.onerror=r.onload=null,"load"===a.type)o();else{var s=a&&("load"===a.type?"missing":a.type),i=a&&a.target&&a.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=s,l.request=i,r.parentNode.removeChild(r),n(l)}};return r.onerror=r.onload=a,r.href=t,document.head.appendChild(r),r},t=function(e,t){for(var o=document.getElementsByTagName("link"),n=0;n<o.length;n++){var r=o[n],a=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(a===e||a===t))return r}var s=document.getElementsByTagName("style");for(n=0;n<s.length;n++){r=s[n],a=r.getAttribute("data-href");if(a===e||a===t)return r}},n=function(n){return new Promise((function(r,a){var s=o.miniCssF(n),i=o.p+s;if(t(s,i))return r();e(n,i,r,a)}))},r={143:0};o.f.miniCss=function(e,t){var o={443:1};r[e]?t.push(r[e]):0!==r[e]&&o[e]&&t.push(r[e]=n(e).then((function(){r[e]=0}),(function(t){throw delete r[e],t})))}}(),function(){var e={143:0};o.f.j=function(t,n){var r=o.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var a=new Promise((function(o,n){r=e[t]=[o,n]}));n.push(r[2]=a);var s=o.p+o.u(t),i=new Error,l=function(n){if(o.o(e,t)&&(r=e[t],0!==r&&(e[t]=void 0),r)){var a=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;i.message="Loading chunk "+t+" failed.\n("+a+": "+s+")",i.name="ChunkLoadError",i.type=a,i.request=s,r[1](i)}};o.l(s,l,"chunk-"+t,t)}},o.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,a,s=n[0],i=n[1],l=n[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(r in i)o.o(i,r)&&(o.m[r]=i[r]);if(l)var u=l(o)}for(t&&t(n);c<s.length;c++)a=s[c],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(u)},n=self["webpackChunkihris_translator"]=self["webpackChunkihris_translator"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(431)}));n=o.O(n)})();
//# sourceMappingURL=app.8f526010.js.map