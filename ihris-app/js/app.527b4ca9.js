(function(){"use strict";var e={3392:function(e,t,o){o.d(t,{Y:function(){return J}});var n=o(538),r=o(998),i=o(3059),s=function(){var e=this,t=e._self._c;return t(r.Z,{attrs:{id:"top"}},[t("IhrisHeader",{attrs:{app:""}}),t(i.Z,[t("router-view")],1)],1)},a=[],c=o(5716),l=o(4562),u=o(9582),d=o(4886),h=o(4324),f=o(5495),p=o(2933),m=o(3305),g=o(3687),y=o(7953),v=function(){var e=this,t=e._self._c;return t("div",[t(c.Z,{attrs:{color:"white",app:"","clipped-left":"","clipped-right":""}},[t("a",{attrs:{href:e.$store.state.coreURL}},[t(f.Z,{attrs:{src:"/ihrisapp/dictionary/images/"+e.header.logo,contain:"","max-height":"36","max-width":"106"}})],1),t(y.qW,{staticClass:"headline ml-2",attrs:{bottom:"true"}},[e.header.title?t("span",{staticClass:"primary--text font-weight-bold"},[e._v(e._s(e.header.title))]):e._e(),e.header.site?t("span",{staticClass:"secondary--text font-weight-bold"},[e._v(" | "+e._s(e.header.site))]):e._e()]),e.$store.state.security_off?t(g.Z):e._e(),e.$store.state.security_off?t("div",{staticClass:"error font-weight-bold white--text",attrs:{dark:""}},[e._v(" Security has been disabled for remote configuration and modules! "),t("br"),e._v(" This should only be done during development. ")]):e._e(),t(g.Z),t("div",[e._v("Welcome "),e.$store.state.user.loggedin?t("span",[e._v(", "+e._s(e.$store.state.user.name))]):e._e()]),t(g.Z),e.header.title?e._e():t(m.Z,{attrs:{indeterminate:"",color:"primary"}}),t(l.Z,{attrs:{icon:"",href:e.$store.state.coreURL,title:"Home"}},[t(h.Z,[e._v("mdi-home")])],1),t(l.Z,{attrs:{icon:"",title:"Help"}},[t(h.Z,[e._v("mdi-help")])],1),t("div"),e.$store.state.user.loggedin?[t(l.Z,{attrs:{small:"",fab:"",dark:"",title:"Logout",loading:e.loading,disabled:e.loading},on:{click:e.logout}},[t(h.Z,[e._v("mdi-logout")])],1)]:e._e()],2),t(p.Z,{attrs:{value:e.idle_countdown}},[t(u.Z,{staticClass:"secondary lighten-1"},[t(d.EB,{staticClass:"headline warning white--text",attrs:{"primary-title":""}},[e._v("Idle - Auto Logout")]),t(d.ZB,{staticClass:"black--text"},[e._v("You have been idle too long and will be logged out in "+e._s(e.idle_logout)+" seconds.")])],1)],1)],1)},_=[],b=o(6123),w=o.n(b),k=o(1705);n.ZP.use(k.Z);var O=new k.Z({}),P=o(629);n.ZP.use(P.ZP);var j=new P.ZP.Store({state:{user:{loggedin:!1,name:""},coreURL:""},getters:{},mutations:{login(e,t){e.user.loggedin=!0,e.user.name=t.name,e.user.location=t.location,e.user.role=t.role,e.user.userId=t.userId,e.user.reference=t.reference,e.user.facilityId=t.facilityId,e.user.physicalLocation=t.physicalLocation},logout(e){e.user.loggedin=!1,e.user.name="",e.user.name="",e.user.location="",e.user.role="",e.user.reference="",e.user.facilityId="",e.user.physicalLocation=""},securityOff(e,t){e.security_off=t}},actions:{},modules:{}}),Z=o(8345);n.ZP.use(Z.Z);const C=[{path:"/",name:"home",component:()=>o.e(443).then(o.bind(o,5015))},{path:"/review/:locale",name:"review",component:()=>o.e(443).then(o.bind(o,6895))}],I=new Z.Z({routes:C});var $=I,L={name:"IhriHeader",vuetify:O,store:j,router:$,data:function(){return{loading:!1,idle_countdown:!1,idle_logout:30,header:{title:!1,site:null,logo:"iHRIS5Logo.png",auths:[]},footer:{links:[]},nav:{active:null,menu:{},auths:[]}}},onIdle(){this.$store.state.user.loggedin&&this.idleDialog()},onActive(){this.idle_countdown=!1},methods:{idleDialog(){this.idle_logout=30,this.idle_countdown=!0;const e=setInterval((()=>{if(!this.isAppIdle)return clearInterval(e);this.idle_logout-=1,this.idle_logout<1&&(clearInterval(e),this.logout(null,!0))}),1e3)},logout(e,t){"keycloak"===this.$store.state.idp?(w().remove("userObj"),this.$keycloak.logout()):(this.loading=!0,fetch("/auth/logout").then((()=>{this.loading=!1,this.$emit("loggedout"),t?this.$store.commit("setMessage",{type:"warning",text:"You have been logged out due to inactivity.",timeout:36e5}):this.$store.commit("setMessage",{type:"success",text:"You have logged out."}),window.location=this.$store.state.coreURL})))},updateConfig:function(){fetch("/auth").then((()=>{fetch("/config/site").then((e=>{e.json().then((e=>{if(Object.prototype.hasOwnProperty.call(e,"security")&&Object.prototype.hasOwnProperty.call(e.security,"disabled")&&this.$store.commit("securityOff",e.security.disabled),Object.prototype.hasOwnProperty.call(e,"title")&&(this.header.title=e.title),Object.prototype.hasOwnProperty.call(e,"site")&&(this.header.site=e.site),Object.prototype.hasOwnProperty.call(e,"logo")&&(this.header.logo=e.logo),Object.prototype.hasOwnProperty.call(e,"auth")){this.header.auths=[],this.nav.auths=[];for(const t of Object.keys(e.auth))e.auth[t].id=t,this.header.auths.push(e.auth[t]),this.nav.auths.push(e.auth[t])}if(Object.prototype.hasOwnProperty.call(e,"user"))if(e.user.loggedin){const t={name:e.user.name,location:e.user.location,role:e.user.role,reference:e.user.reference,facilityId:e.user.facilityId,physicalLocation:e.user.physicalLocation};this.$store.commit("login",t)}else this.$store.commit("logout");Object.prototype.hasOwnProperty.call(e,"nav")&&(Object.prototype.hasOwnProperty.call(e.nav,"active")&&(this.nav.active=e.nav.active),Object.prototype.hasOwnProperty.call(e.nav,"menu")&&(this.nav.menu=e.nav.menu),Object.prototype.hasOwnProperty.call(e.nav,"home")&&(this.nav.home=e.nav.home))}))}))}))}},created(){this.updateConfig()}},x=L,S=o(1001),T=(0,S.Z)(x,v,_,!1,null,null,null),A=T.exports,E={components:{IhrisHeader:A},created(){let e=location.search;e=e.substring(1),e=e.split("=");const t=e.findIndex((e=>"baseURL"===e));-1!==t&&(this.$store.state.coreURL=e[t+1])}},N=E,U=(0,S.Z)(N,s,a,!1,null,null,null),R=U.exports,B=o(4671),H=o(3431),D=o.n(H),F=(o(7147),o(9887)),M=o.n(F);o(1703);const q=o(9887),Y={_code_cache:{},_code_loading:{},_setCache:(e,t)=>(Y._code_cache[e]=t,Y._code_loading[e]=!1,t),checkConstraints:(e,t,o,n,r)=>(console.log(e),new Promise(((i,s)=>{const a=e.split(","),c=[];for(const e of a)if(t[e]){const i=q.evaluate(o,t[e].expression);if(e.startsWith("ihris-search")){const o=i.shift(),s=["_elements=id"];while(i.length)s.push(i.shift()+"="+encodeURI(i.shift()));c.push(new Promise(((i,a)=>{fetch("/fhir/"+o+"?"+s.join("&")).then((o=>{if(200!==o.status)return a(o.status);o.json().then((o=>{if(0===o.total)i(!0);else if(r){const s=q.evaluate(o.entry,"resource.id");s.includes(r)?i(!0):(n.push(t[e].human),i(!1))}else n.push(t[e].human),i(!1)})).catch((e=>{a(e)}))})).catch((e=>{a(e)}))})))}else i.every(Boolean)?c.push(!0):(n.push(t[e].human),c.push(!1))}Promise.all(c).then((e=>{e.every(Boolean)?i(!0):i(!1)})).catch((e=>{s(e)}))}))),lookup:(e,t)=>e?t?Y.codeLookup(t,e):e.system&&e.code?Y.codeLookup(e.system,e.code):e.reference?Y.resourceLookup(e.reference):/([A-Z]\w*)\/([A-Za-z0-9\-.]{1,64})/.test(e)?Y.resourceLookup(e):new Promise((t=>t(e))):new Promise((t=>t(e))),resourceLookup:e=>new Promise((t=>{const o=e;Y._code_loading[o]?setTimeout((()=>{t(Y.resourceLookup(e))}),200):Y._code_cache[o]?t(Y._code_cache[o]):(Y._code_loading[o]=!0,fetch("/fhir/$short-name?reference="+e).then((n=>{200===n.status?n.json().then((n=>{n.display?t(Y._setCache(o,n.display)):(console.log("No display data from reference found ",o,n),t(Y._setCache(o,e)))})).catch((n=>{console.log(n),t(Y._setCache(o,e))})):(console.log("Invalid status from reference $short-name for ",o),t(Y._setCache(o,e)))})).catch((n=>{console.log(n),t(Y._setCache(o,e))})))})),codeLookup:(e,t,o)=>new Promise((n=>{const r=e+"#"+t;Y._code_loading[r]?setTimeout((()=>{n(Y.codeLookup(e,t,o))}),200):Y._code_cache[r]?n(Y._code_cache[r]):(Y._code_loading[r]=!0,fetch("/fhir/$short-name?system="+e+"&code="+t+"&valuset="+o).then((e=>{200===e.status?e.json().then((e=>{e.display?n(Y._setCache(r,e.display)):(console.log("No display data from codesystem found ",r,e),n(Y._setCache(r,t)))})).catch((e=>{console.log(e),n(Y._setCache(r,t))})):(console.log("Invalid status from codesystem $short-name for ",r),n(Y._setCache(r,t)))})).catch((e=>{console.log(e),n(Y._setCache(r,t))})))})),pathFieldExpression:e=>{const t=e.substring(e.indexOf(":")+1);return t.includes("-")||t.includes(".")?"`"+t+"`":t},expand:e=>{const t=(e,t)=>e.display===t.display?e.code===t.code?0:e.code<t.code?-1:1:e.display<t.display?-1:1,o=(e,t)=>{if(e.compose.include)for(const o of e.compose.include)if(o.concept)for(const e of o.concept)e.system=o.system,t.push(e)};return new Promise(((n,r)=>{const i=e.lastIndexOf("/"),s=e.lastIndexOf("|"),a=e.slice(i+1,-1!==s?s:e.length);let c=[];fetch("/fhir/ValueSet/"+a+"/$expand").then((e=>{e.ok?e.json().then((e=>{try{e.expansion&&0!==e.expansion.total||!e.compose.include?c=e.expansion.contains:o(e,c),c.sort(t),n(c)}catch(i){console.log(i),r(new Error("Invalid response from server."))}})).catch((e=>{r(e)})):fetch("/fhir/ValueSet/"+a).then((e=>{e.ok?e.json().then((e=>{o(e,c),c.sort(t),n(c)})).catch((e=>{r(e)})):r(new Error("Invalid response from server."))})).catch((e=>{r(e)}))})).catch((e=>{r(e)}))}))}};var W=Y;const z=o(4230);n.ZP.config.productionTip=!1,Object.defineProperty(n.ZP.prototype,"$fhirpath",{value:M()}),Object.defineProperty(n.ZP.prototype,"$fhirutils",{value:W});const J=new n.ZP;n.ZP.use(D(),{eventEmitter:J,store:j,idleTime:9e5,startAtIdle:!1}),fetch("/config/app").then((e=>{e.json().then((e=>{if(j.state.idp=e.idp,"keycloak"===j.state.idp){const t={realm:e.keycloak.realm,clientId:e.keycloak.UIClientId,url:e.keycloak.baseURL,onLoad:"login-required"},o=B(t),r={install(e){e.$keycloak=o}};r.install=e=>{e.$keycloak=o,Object.defineProperties(e.prototype,{$keycloak:{get(){return o}}})},n.ZP.use(r),o.init({onLoad:t.onLoad}).then((e=>{e?(window.fetch=z(fetch,{headers:{Authorization:`Bearer ${o.token}`}}),o.loadUserInfo().then((e=>{const t={resourceType:"Person",id:e.sub,meta:{profile:["http://ihris.org/fhir/StructureDefinition/ihris-person-user"]},name:[{use:"official",text:e.name}],active:!0};e.email&&(t.telecom=[{system:"email",value:e.email}]),fetch("/auth",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)}).then((e=>{e.json().then((e=>{w().set("userObj",JSON.stringify(e),"infinity"),new n.ZP({router:$,store:j,vuetify:O,render:e=>e(R)}).$mount("#app")}))})).catch((e=>{console.error(e)}))})),setInterval((()=>{o.updateToken(70)}),6e4)):window.location.reload()})).catch((()=>{alert("Keycloak access failed")}))}else n.ZP.prototype.$keycloak=null,new n.ZP({router:$,store:j,vuetify:O,render:e=>e(R)}).$mount("#app")}))}))}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}o.m=e,function(){o.amdO={}}(),function(){var e=[];o.O=function(t,n,r,i){if(!n){var s=1/0;for(u=0;u<e.length;u++){n=e[u][0],r=e[u][1],i=e[u][2];for(var a=!0,c=0;c<n.length;c++)(!1&i||s>=i)&&Object.keys(o.O).every((function(e){return o.O[e](n[c])}))?n.splice(c--,1):(a=!1,i<s&&(s=i));if(a){e.splice(u--,1);var l=r();void 0!==l&&(t=l)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[n,r,i]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce((function(t,n){return o.f[n](e,t),t}),[]))}}(),function(){o.u=function(e){return"js/about.2e3faa71.js"}}(),function(){o.miniCssF=function(e){return"css/about.9d9c0c73.css"}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="ihris-dictionary:";o.l=function(n,r,i,s){if(e[n])e[n].push(r);else{var a,c;if(void 0!==i)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+i){a=d;break}}a||(c=!0,a=document.createElement("script"),a.charset="utf-8",a.timeout=120,o.nc&&a.setAttribute("nonce",o.nc),a.setAttribute("data-webpack",t+i),a.src=n),e[n]=[r];var h=function(t,o){a.onerror=a.onload=null,clearTimeout(f);var r=e[n];if(delete e[n],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((function(e){return e(o)})),t)return t(o)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),c&&document.head.appendChild(a)}}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){o.p="/ihrisapp/dictionary/"}(),function(){var e=function(e,t,o,n){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css";var i=function(i){if(r.onerror=r.onload=null,"load"===i.type)o();else{var s=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=s,c.request=a,r.parentNode.removeChild(r),n(c)}};return r.onerror=r.onload=i,r.href=t,document.head.appendChild(r),r},t=function(e,t){for(var o=document.getElementsByTagName("link"),n=0;n<o.length;n++){var r=o[n],i=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(i===e||i===t))return r}var s=document.getElementsByTagName("style");for(n=0;n<s.length;n++){r=s[n],i=r.getAttribute("data-href");if(i===e||i===t)return r}},n=function(n){return new Promise((function(r,i){var s=o.miniCssF(n),a=o.p+s;if(t(s,a))return r();e(n,a,r,i)}))},r={143:0};o.f.miniCss=function(e,t){var o={443:1};r[e]?t.push(r[e]):0!==r[e]&&o[e]&&t.push(r[e]=n(e).then((function(){r[e]=0}),(function(t){throw delete r[e],t})))}}(),function(){var e={143:0};o.f.j=function(t,n){var r=o.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise((function(o,n){r=e[t]=[o,n]}));n.push(r[2]=i);var s=o.p+o.u(t),a=new Error,c=function(n){if(o.o(e,t)&&(r=e[t],0!==r&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",a.name="ChunkLoadError",a.type=i,a.request=s,r[1](a)}};o.l(s,c,"chunk-"+t,t)}},o.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,i,s=n[0],a=n[1],c=n[2],l=0;if(s.some((function(t){return 0!==e[t]}))){for(r in a)o.o(a,r)&&(o.m[r]=a[r]);if(c)var u=c(o)}for(t&&t(n);l<s.length;l++)i=s[l],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(u)},n=self["webpackChunkihris_dictionary"]=self["webpackChunkihris_dictionary"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(3392)}));n=o.O(n)})();
//# sourceMappingURL=app.527b4ca9.js.map